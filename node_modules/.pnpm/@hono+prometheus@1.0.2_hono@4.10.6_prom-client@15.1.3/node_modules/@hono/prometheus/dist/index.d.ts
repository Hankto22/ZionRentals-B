import { Context, TypedResponse, MiddlewareHandler } from 'hono';
import { ContentfulStatusCode } from 'hono/utils/http-status';
import { HistogramConfiguration, CounterConfiguration, Registry, DefaultMetricsCollectorConfiguration, RegistryContentType } from 'prom-client';

interface CounterOptions<T extends string> extends CounterConfiguration<T> {
    type: 'counter';
    disabled?: boolean;
    customLabels?: Record<string, (c: Context) => string>;
}
interface HistogramOptions<T extends string> extends HistogramConfiguration<T> {
    type: 'histogram';
    disabled?: boolean;
    customLabels?: Record<string, (c: Context) => string>;
}
type MetricOptions<T extends string = string> = CounterOptions<T> | HistogramOptions<T>;
declare const standardMetrics: {
    requestDuration: HistogramOptions<string>;
    requestsTotal: CounterOptions<string>;
};
type MetricName = keyof typeof standardMetrics;
type CustomMetricsOptions = {
    [Name in MetricName]?: Partial<Omit<MetricOptions, 'type' | 'collect' | 'labelNames'>>;
};

interface PrometheusOptions {
    registry?: Registry;
    collectDefaultMetrics?: boolean | DefaultMetricsCollectorConfiguration<RegistryContentType>;
    prefix?: string;
    metricOptions?: Omit<CustomMetricsOptions, 'prefix' | 'register'>;
}
declare const prometheus: (options?: PrometheusOptions) => {
    printMetrics: (c: Context) => Promise<Response & TypedResponse<string, ContentfulStatusCode, "text">>;
    registerMetrics: MiddlewareHandler;
};

export { prometheus };
